import{aq as Tr,ar as Rr,as as jr,at as Ar,r as c,au as Nr,av as uo,ap as po,a as i,F as W,aw as Lr,ax as At,ay as Nt,az as pe,aA as ho,s as B,v as L,aB as Fr,P as Je,E as Te,aC as Be,Q as Et,aD as Re,aE as V,aF as zr,j as w,g as fo,aG as mo,h as Qe,aH as Br,af as je,i as ge,t as wt,aI as Wr,aJ as Vr,aK as Ur,aL as Hr,aM as $r,m as De,aN as Gr,aO as H,aP as Yr,aQ as Lt,aR as Ft,aS as ve,aT as Kr,aU as qr,aV as fn,aW as Xr,aX as Jr,aY as Qr,aZ as Zr,a_ as de,e as K,B as k,T as j,a$ as be,y as oe,b0 as zt,b1 as go,b2 as ea,C as le,ae as ta,b3 as na,x as Ae,an as Bt,z as vo,b4 as Me,b5 as oa,b6 as Pe,u as bo,c as Ze,A as ra,b7 as yo,b8 as aa,b9 as ia,ba as sa,bb as Ne,W as ca,bc as xe,bd as Le,be as la,bf as et,bg as ua,l as _o,bh as da,bi as pa,bj as ha,q as xo,bk as fa,bl as tt,bm as Po,bn as mn,bo as ma,bp as Wt,bq as ga,br as va,bs as Ct,bt as So,bu as ba,bv as ya,f as _a,bw as xa,bx as Pa,by as Sa,bz as Ea,bA as wa,K as ue,w as nt,bB as Eo,bC as ot,bD as wo,a2 as ce,M as Ca,bE as Vt,bF as Ut,bG as Ia,bH as Oa,bI as Co,bJ as Da,bK as Ma,bL as Io,bM as Oo,bN as gn,bO as ka,bP as Ta,a9 as Do,bQ as Ra,bR as Mo,bS as It,bT as ja,bU as Aa,bV as Na,bW as ko,bX as To,bY as La,bZ as Fa,b_ as Ro,b$ as za,c0 as jo,c1 as Ba,c2 as Wa,c3 as Ao,c4 as Ht,c5 as Va,c6 as gt,c7 as Ua,c8 as Ha,L as $a,N as vn,c9 as Ga,ca as Ya,cb as vt,H as Ka,cc as Ot,cd as Dt,ce as No,a5 as qa,cf as Xa,cg as Ja,ch as Qa,ci as Za,cj as ei,ck as ti,cl as $t,cm as ni,cn as oi,co as ri,cp as ai,ag as ii,cq as si,R as ci,cr as li,cs as ui,ct as di,cu as Mt,cv as Lo,cw as pi,cx as hi,cy as fi,b as mi,cz as gi,cA as kt,cB as vi,cC as bi,D as yi,cD as bt,cE as bn,V as _i,X as xi,cF as Fo,cG as Pi,cH as Si,cI as Ei,cJ as wi,cK as yt,cL as yn,cM as Ci,cN as _n,cO as Ii}from"./sanity-93b3c6af.js";function zo(t,e){var n=typeof e=="object";return new Promise(function(o,r){var a=new Tr({next:function(s){o(s),a.unsubscribe()},error:r,complete:function(){n?o(e.defaultValue):r(new Rr)}});t.subscribe(a)})}function Oi(){return jr(function(t,e){var n,o=!1;t.subscribe(Ar(e,function(r){var a=n;n=r,o&&e.next([a,r]),o=!0}))})}function Di(t,e){var n=c.useCallback(function(){var s=new Nr(t),u=s.asObservable().pipe(uo());return[e?u.pipe(e):u,s]},[]),o=c.useRef();o.current||(o.current=n());var r=o.current[0];c.useEffect(function(){if(o.current){var s=o.current,u=s[1];u.next(t)}},[t,o]);var a=c.useRef(!1);return c.useEffect(function(){return a.current&&(o.current||(o.current=n()),a.current=!1),function(){if(o.current){a.current=!0;var s=o.current,u=s[1];u.complete(),o.current=void 0}}},[]),r}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var xn=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,ki=Object.prototype.propertyIsEnumerable;function Ti(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ri(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(o.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(a){r[a]=a}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var ji=Ri()?Object.assign:function(t,e){for(var n,o=Ti(t),r,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var s in n)Mi.call(n,s)&&(o[s]=n[s]);if(xn){r=xn(n);for(var u=0;u<r.length;u++)ki.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o},We=ji,Ai={};function ne(t,e,n,o,r,a,s,u){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,r,a,s,u],h=0;l=new Error(e.replace(/%s/g,function(){return d[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var Pn="mixins";function Ni(t,e,n){var o=[],r={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},a={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},s={displayName:function(m,f){m.displayName=f},mixins:function(m,f){if(f)for(var v=0;v<f.length;v++)l(m,f[v])},childContextTypes:function(m,f){m.childContextTypes=We({},m.childContextTypes,f)},contextTypes:function(m,f){m.contextTypes=We({},m.contextTypes,f)},getDefaultProps:function(m,f){m.getDefaultProps?m.getDefaultProps=p(m.getDefaultProps,f):m.getDefaultProps=f},propTypes:function(m,f){m.propTypes=We({},m.propTypes,f)},statics:function(m,f){d(m,f)},autobind:function(){}};function u(m,f){var v=r.hasOwnProperty(f)?r[f]:null;_.hasOwnProperty(f)&&ne(v==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",f),m&&ne(v==="DEFINE_MANY"||v==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",f)}function l(m,f){if(f){ne(typeof f!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),ne(!e(f),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var v=m.prototype,O=v.__reactAutoBindPairs;f.hasOwnProperty(Pn)&&s.mixins(m,f.mixins);for(var E in f)if(f.hasOwnProperty(E)&&E!==Pn){var I=f[E],D=v.hasOwnProperty(E);if(u(D,E),s.hasOwnProperty(E))s[E](m,I);else{var T=r.hasOwnProperty(E),F=typeof I=="function",R=F&&!T&&!D&&f.autobind!==!1;if(R)O.push(E,I),v[E]=I;else if(D){var A=r[E];ne(T&&(A==="DEFINE_MANY_MERGED"||A==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",A,E),A==="DEFINE_MANY_MERGED"?v[E]=p(v[E],I):A==="DEFINE_MANY"&&(v[E]=b(v[E],I))}else v[E]=I}}}}function d(m,f){if(f)for(var v in f){var O=f[v];if(f.hasOwnProperty(v)){var E=v in s;ne(!E,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',v);var I=v in m;if(I){var D=a.hasOwnProperty(v)?a[v]:null;ne(D==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",v),m[v]=p(m[v],O);return}m[v]=O}}}function h(m,f){ne(m&&f&&typeof m=="object"&&typeof f=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var v in f)f.hasOwnProperty(v)&&(ne(m[v]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",v),m[v]=f[v]);return m}function p(m,f){return function(){var O=m.apply(this,arguments),E=f.apply(this,arguments);if(O==null)return E;if(E==null)return O;var I={};return h(I,O),h(I,E),I}}function b(m,f){return function(){m.apply(this,arguments),f.apply(this,arguments)}}function g(m,f){var v=f.bind(m);return v}function x(m){for(var f=m.__reactAutoBindPairs,v=0;v<f.length;v+=2){var O=f[v],E=f[v+1];m[O]=g(m,E)}}var P={componentDidMount:function(){this.__isMounted=!0}},C={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(m,f){this.updater.enqueueReplaceState(this,m,f)},isMounted:function(){return!!this.__isMounted}},y=function(){};We(y.prototype,t.prototype,_);function S(m){var f=function(O,E,I){this.__reactAutoBindPairs.length&&x(this),this.props=O,this.context=E,this.refs=Ai,this.updater=I||n,this.state=null;var D=this.getInitialState?this.getInitialState():null;ne(typeof D=="object"&&!Array.isArray(D),"%s.getInitialState(): must return an object or null",f.displayName||"ReactCompositeComponent"),this.state=D};f.prototype=new y,f.prototype.constructor=f,f.prototype.__reactAutoBindPairs=[],o.forEach(l.bind(null,f)),l(f,P),l(f,m),l(f,C),f.getDefaultProps&&(f.defaultProps=f.getDefaultProps()),ne(f.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var v in r)f.prototype[v]||(f.prototype[v]=null);return f}return S}var Li=Ni,Ke=c,Fi=Li;if(typeof Ke>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var zi=new Ke.Component().updater,rt=Fi(Ke.Component,Ke.isValidElement,zi),Bi=Date.now||Wi;function Wi(){return new Date().getTime()}var Sn=Bi,Vi=function(e,n,o){var r,a,s,u,l;n==null&&(n=100);function d(){var h=Sn()-u;h<n&&h>0?r=setTimeout(d,n-h):(r=null,o||(l=e.apply(s,a),r||(s=a=null)))}return function(){s=this,a=arguments,u=Sn();var p=o&&!r;return r||(r=setTimeout(d,n)),p&&(l=e.apply(s,a),s=a=null),l}},Ui=Hi;function Hi(t){for(var e=$i(t),n=1732584193,o=-271733879,r=-1732584194,a=271733878,s=0;s<e.length;s+=16){var u=n,l=o,d=r,h=a;n=X(n,o,r,a,e[s+0],7,-680876936),a=X(a,n,o,r,e[s+1],12,-389564586),r=X(r,a,n,o,e[s+2],17,606105819),o=X(o,r,a,n,e[s+3],22,-1044525330),n=X(n,o,r,a,e[s+4],7,-176418897),a=X(a,n,o,r,e[s+5],12,1200080426),r=X(r,a,n,o,e[s+6],17,-1473231341),o=X(o,r,a,n,e[s+7],22,-45705983),n=X(n,o,r,a,e[s+8],7,1770035416),a=X(a,n,o,r,e[s+9],12,-1958414417),r=X(r,a,n,o,e[s+10],17,-42063),o=X(o,r,a,n,e[s+11],22,-1990404162),n=X(n,o,r,a,e[s+12],7,1804603682),a=X(a,n,o,r,e[s+13],12,-40341101),r=X(r,a,n,o,e[s+14],17,-1502002290),o=X(o,r,a,n,e[s+15],22,1236535329),n=J(n,o,r,a,e[s+1],5,-165796510),a=J(a,n,o,r,e[s+6],9,-1069501632),r=J(r,a,n,o,e[s+11],14,643717713),o=J(o,r,a,n,e[s+0],20,-373897302),n=J(n,o,r,a,e[s+5],5,-701558691),a=J(a,n,o,r,e[s+10],9,38016083),r=J(r,a,n,o,e[s+15],14,-660478335),o=J(o,r,a,n,e[s+4],20,-405537848),n=J(n,o,r,a,e[s+9],5,568446438),a=J(a,n,o,r,e[s+14],9,-1019803690),r=J(r,a,n,o,e[s+3],14,-187363961),o=J(o,r,a,n,e[s+8],20,1163531501),n=J(n,o,r,a,e[s+13],5,-1444681467),a=J(a,n,o,r,e[s+2],9,-51403784),r=J(r,a,n,o,e[s+7],14,1735328473),o=J(o,r,a,n,e[s+12],20,-1926607734),n=Q(n,o,r,a,e[s+5],4,-378558),a=Q(a,n,o,r,e[s+8],11,-2022574463),r=Q(r,a,n,o,e[s+11],16,1839030562),o=Q(o,r,a,n,e[s+14],23,-35309556),n=Q(n,o,r,a,e[s+1],4,-1530992060),a=Q(a,n,o,r,e[s+4],11,1272893353),r=Q(r,a,n,o,e[s+7],16,-155497632),o=Q(o,r,a,n,e[s+10],23,-1094730640),n=Q(n,o,r,a,e[s+13],4,681279174),a=Q(a,n,o,r,e[s+0],11,-358537222),r=Q(r,a,n,o,e[s+3],16,-722521979),o=Q(o,r,a,n,e[s+6],23,76029189),n=Q(n,o,r,a,e[s+9],4,-640364487),a=Q(a,n,o,r,e[s+12],11,-421815835),r=Q(r,a,n,o,e[s+15],16,530742520),o=Q(o,r,a,n,e[s+2],23,-995338651),n=Z(n,o,r,a,e[s+0],6,-198630844),a=Z(a,n,o,r,e[s+7],10,1126891415),r=Z(r,a,n,o,e[s+14],15,-1416354905),o=Z(o,r,a,n,e[s+5],21,-57434055),n=Z(n,o,r,a,e[s+12],6,1700485571),a=Z(a,n,o,r,e[s+3],10,-1894986606),r=Z(r,a,n,o,e[s+10],15,-1051523),o=Z(o,r,a,n,e[s+1],21,-2054922799),n=Z(n,o,r,a,e[s+8],6,1873313359),a=Z(a,n,o,r,e[s+15],10,-30611744),r=Z(r,a,n,o,e[s+6],15,-1560198380),o=Z(o,r,a,n,e[s+13],21,1309151649),n=Z(n,o,r,a,e[s+4],6,-145523070),a=Z(a,n,o,r,e[s+11],10,-1120210379),r=Z(r,a,n,o,e[s+2],15,718787259),o=Z(o,r,a,n,e[s+9],21,-343485551),n=se(n,u),o=se(o,l),r=se(r,d),a=se(a,h)}return Ve(n)+Ve(o)+Ve(r)+Ve(a)}var En="0123456789abcdef";function Gt(t,e){var n=t&1|e&1,o=t>>>1|e>>>1;return o<<1|n}function Tt(t,e){var n=t&1^e&1,o=t>>>1^e>>>1;return o<<1|n}function qe(t,e){var n=t&1&(e&1),o=t>>>1&e>>>1;return o<<1|n}function se(t,e){var n=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(n>>16);return o<<16|n&65535}function Ve(t){var e="",n;for(n=0;n<=3;n++)e+=En.charAt(t>>n*8+4&15)+En.charAt(t>>n*8&15);return e}function $i(t){var e=(t.length+8>>6)+1,n=new Array(e*16),o;for(o=0;o<e*16;o++)n[o]=0;for(o=0;o<t.length;o++)n[o>>2]|=t.charCodeAt(o)<<(t.length*8+o)%4*8;n[o>>2]|=128<<(t.length*8+o)%4*8;var r=t.length*8;return n[e*16-2]=r&255,n[e*16-2]|=(r>>>8&255)<<8,n[e*16-2]|=(r>>>16&255)<<16,n[e*16-2]|=(r>>>24&255)<<24,n}function Gi(t,e){return t<<e|t>>>32-e}function at(t,e,n,o,r,a){return se(Gi(se(se(e,t),se(o,a)),r),n)}function X(t,e,n,o,r,a,s){return at(Gt(qe(e,n),qe(~e,o)),t,e,r,a,s)}function J(t,e,n,o,r,a,s){return at(Gt(qe(e,o),qe(n,~o)),t,e,r,a,s)}function Q(t,e,n,o,r,a,s){return at(Tt(Tt(e,n),o),t,e,r,a,s)}function Z(t,e,n,o,r,a,s){return at(Tt(n,Gt(e,~o)),t,e,r,a,s)}var Yi=Math.ceil(Math.random()*10),Ki=function(){return++Yi},Yt=function(t){return Object.prototype.toString.call(t).slice(8,-1)},qi=Yt;function Xi(t){var e=qi(t);return e!=="Object"&&e!=="Array"}var Bo=Xi,Ji=c,Qi=rt,Ue=Ji.createElement,Zi=Qi({getDefaultProps:function(){return{string:"",highlight:""}},shouldComponentUpdate:function(t){return t.highlight!==this.props.highlight},render:function(){var t=this.props,e=t.string.search(t.highlight);if(!t.highlight||e===-1)return Ue("span",null,t.string);var n=t.highlight.source.length,o=t.string.substr(e,n);return Ue("span",null,t.string.split(t.highlight).map(function(r,a){return Ue("span",{key:a},a>0?Ue("span",{className:"json-inspector__hl"},o):null,r)}))}}),es=c,ts=rt,ns=Ui,os=Ki,Wo=Yt,He=Bo,rs=Zi,ee=es.createElement,as=".root.",Vo=ts({getInitialState:function(){return{expanded:this._isInitiallyExpanded(this.props)}},getDefaultProps:function(){return{root:!1,prefix:""}},render:function(){var t="id_"+os(),e=this.props,n={path:this.keypath(),key:e.label.toString(),value:e.data},o=this._onClick.bind(this,n);return ee("div",{className:this.getClassName(),id:"leaf-"+this._rootPath()},ee("input",{className:"json-inspector__radio",type:"radio",name:e.id,id:t,tabIndex:-1}),ee("label",{className:"json-inspector__line",htmlFor:t,onClick:o},ee("div",{className:"json-inspector__flatpath"},n.path),ee("span",{className:"json-inspector__key"},this.format(n.key),":",this.renderInteractiveLabel(n.key,!0)),this.renderTitle(),this.renderShowOriginalButton()),this.renderChildren())},renderTitle:function(){var t=this.data(),e=Wo(t);switch(e){case"Array":var n=t.length;return ee("span",{className:"json-inspector__value json-inspector__value_helper"},(n>0?"[…] ":"[] ")+is(n));case"Object":var o=Object.keys(t).length;return ee("span",{className:"json-inspector__value json-inspector__value_helper"},(o>0?"{…} ":"{} ")+ss(o));default:return ee("span",{className:"json-inspector__value json-inspector__value_"+e.toLowerCase()},this.format(String(t)),this.renderInteractiveLabel(t,!1))}},renderChildren:function(){var t=this.props,e=this._rootPath(),n=this.data();return this.state.expanded&&!He(n)?Object.keys(n).map(function(o){var r=n[o],a=!this.state.original||(t.verboseShowOriginal?t.query:!1);return ee(Vo,{data:r,label:o,prefix:e,onClick:t.onClick,id:t.id,query:t.query,getOriginal:a?t.getOriginal:null,key:cs(o,r),isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal})},this):null},renderShowOriginalButton:function(){var t=this.props;return He(t.data)||this.state.original||!t.getOriginal||!t.query||_t(this.keypath(),t.query)?null:ee("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})},renderInteractiveLabel:function(t,e){return typeof this.props.interactiveLabel=="function"?ee(this.props.interactiveLabel,{value:String(t),originalValue:t,isKey:e,keypath:this.keypath()}):null},componentWillReceiveProps:function(t){t.query&&this.setState({expanded:!_t(t.label,t.query)}),this.props.query&&!t.query&&this.setState({expanded:this._isInitiallyExpanded(t)})},_rootPath:function(){return this.props.prefix+"."+this.props.label},keypath:function(){return this._rootPath().substr(as.length)},data:function(){return this.state.original||this.props.data},format:function(t){return ee(rs,{string:t,highlight:this.props.query})},getClassName:function(){var t="json-inspector__leaf";return this.props.root&&(t+=" json-inspector__leaf_root"),this.state.expanded&&(t+=" json-inspector__leaf_expanded"),He(this.props.data)||(t+=" json-inspector__leaf_composite"),t},toggle:function(){this.setState({expanded:!this.state.expanded})},_onClick:function(t,e){this.toggle(),this.props.onClick(t),e.stopPropagation()},_onShowOriginalClick:function(t){this.setState({original:this.props.getOriginal(this.keypath())}),t.stopPropagation()},_isInitiallyExpanded:function(t){var e=this.keypath();return t.root?!0:t.query?!_t(e,t.query)&&typeof t.getOriginal=="function":t.isExpanded(e,t.data)}});function is(t){return t+(t===1?" item":" items")}function ss(t){return t+(t===1?" property":" properties")}function cs(t,e){if(He(e)){var n=ns(String(e));return t+":"+n}else return t+"["+Wo(e)+"]"}function _t(t,e){return t.indexOf(e)!==-1}var ls=Vo,Uo=function(){},us=c,ds=rt,ps=us.createElement,hs=Uo,fs=ds({getDefaultProps:function(){return{onChange:hs}},render:function(){return ps("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:this.onChange})},onChange:function(t){this.props.onChange(t.target.value)}}),Ho=function(t){return Object.keys(t).length===0},ms=Object.keys,gs=Bo,vs=Ho,bs=function(t,e){e||(e={cacheResults:!0});var n={};return function(o){if(!e.cacheResults)return $e(t,o,e);var r;if(!n[o]){for(var a=o.length-1;a>0;a-=1)if(r=o.substr(0,a),n[r]){n[o]=$e(n[r],o,e);break}}return n[o]||(n[o]=$e(t,o,e)),n[o]}};function $e(t,e,n){return ms(t).reduce(function(o,r){var a=t[r],s;return gs(a)?(xt(e,r,n)||xt(e,a,n))&&(o[r]=a):xt(e,r,n)?o[r]=a:(s=$e(a,e,n),vs(s)||Object.assign(o,ys(r,s))),o},{})}function xt(t,e,n){if(e){var o=String(e),r=t;return n.ignoreCase&&(o=o.toLowerCase(),r=r.toLowerCase()),o.indexOf(r)!==-1}}function ys(t,e){var n={};return n[t]=e,n}var _s=Yt,Pt=".";function Rt(t,e){var n=e.split(Pt),o=n.shift();if(!o)return t;var r=_s(t);if(r==="Array"&&t[wn(o)])return Rt(t[wn(o)],n.join(Pt));if(r==="Object"&&t[o])return Rt(t[o],n.join(Pt))}function wn(t){return parseInt(t,10)}var xs=Rt,Ps=c,Ss=rt,Es=Vi,Oe=Ps.createElement,ws=ls,Cs=fs,Is=bs,Os=Ho,Ds=xs,Ms=Uo,ks=Ss({getDefaultProps:function(){return{data:null,search:Cs,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:Ms,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(t){return t.length>=2},isExpanded:function(t,e){return!1},verboseShowOriginal:!1}},getInitialState:function(){return{query:this.props.query||""}},render:function(){var t=this.props,e=this.state,n=e.query!==""&&t.validateQuery(e.query),o=n?e.filterer(e.query):t.data,r=n&&Os(o);return Oe("div",{className:"json-inspector "+t.className},this.renderToolbar(),r?Oe("div",{className:"json-inspector__not-found"},"Nothing found"):Oe(ws,{data:o,onClick:t.onClick,id:t.id,getOriginal:this.getOriginal,query:n?new RegExp(e.query,t.filterOptions.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal}))},renderToolbar:function(){var t=this.props.search;if(t)return Oe("div",{className:"json-inspector__toolbar"},Oe(t,{onChange:Es(this.search,this.props.searchOptions.debounceTime),data:this.props.data,query:this.state.query}))},search:function(t){this.setState({query:t})},componentWillMount:function(){this.createFilterer(this.props.data,this.props.filterOptions)},componentWillReceiveProps:function(t){this.createFilterer(t.data,t.filterOptions);var e=typeof t.query=="string"&&t.query!==this.state.query;e&&this.setState({query:t.query})},shouldComponentUpdate:function(t,e){return t.query!==this.props.query||e.query!==this.state.query||t.data!==this.props.data||t.onClick!==this.props.onClick},createFilterer:function(t,e){this.setState({filterer:Is(t,e)})},getOriginal:function(t){return Ds(this.props.data,t)}});const Ts=po(ks);var Rs=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),o=Object.create(null);function r(a,s){n[a]=s,e++,e>=t&&(e=0,o=n,n=Object.create(null))}return{has:function(a){return n[a]!==void 0||o[a]!==void 0},remove:function(a){n[a]!==void 0&&(n[a]=void 0),o[a]!==void 0&&(o[a]=void 0)},get:function(a){var s=n[a];if(s!==void 0)return s;if((s=o[a])!==void 0)return r(a,s),s},set:function(a,s){n[a]!==void 0?n[a]=s:r(a,s)},clear:function(){n=Object.create(null),o=Object.create(null)}}};const js=po(Rs);var Cn,In,On,Dn,Mn,kn,Tn,Rn,jn,An,Nn,Ln,Fn,zn,Bn,Wn,Vn,Un,Hn,$n,Gn,Yn,Kn,qn,Xn,Jn;function z(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function $o(t){let{children:e,ms:n=0}=t;const[o,r]=c.useState(n<=0);return c.useEffect(()=>{if(n<=0)return;const a=setTimeout(()=>r(!0),n);return()=>{clearTimeout(a)}},[n]),!o||!e?i(W,{}):typeof e=="function"?e():e}const Kt=t=>{const{actions:e,children:n,actionProps:o,onActionComplete:r}=t;return i(So,{onReset:r,hooks:e,args:o,children:n})},As=t=>{const{badges:e,children:n,badgeProps:o,...r}=t;return i(So,{...r,hooks:e,args:o,children:n})},Ns=[];function Ls(t){const{children:e,flatIndex:n,index:o,params:r,payload:a,siblingIndex:s}=t,{navigate:u,navigateIntent:l}=At(),d=Nt(),h=c.useMemo(()=>(d==null?void 0:d.panes)||Ns,[d==null?void 0:d.panes]),p=o-1,b=c.useCallback(_=>{const y=h[p]||[],S=y[s],m=_(y,S),f=[...h.slice(0,p),m,...h.slice(p+1)],v={...d||{},panes:f};return setTimeout(()=>u(v),0),v},[p,u,h,d,s]),g=c.useCallback(_=>{b((y,S)=>[...y.slice(0,s),{...S,payload:_},...y.slice(s+1)])},[b,s]),x=c.useCallback(_=>{b((y,S)=>[...y.slice(0,s),{...S,params:_},...y.slice(s+1)])},[b,s]),P=c.useCallback(_=>{let{id:y,parentRefPath:S,type:m,template:f}=_;u({panes:[...h.slice(0,p+1),[{id:y,params:{template:f.id,parentRefPath:ba(S),type:m},payload:f.params}]]})},[p,u,h]),C=c.useMemo(()=>({index:n,groupIndex:p,siblingIndex:s,payload:a,params:r,hasGroupSiblings:h[p]?h[p].length>1:!1,groupLength:h[p]?h[p].length:0,routerPanesState:h,ChildLink:ya,BackLink:_a,ReferenceChildLink:xa,handleEditReference:P,ParameterizedLink:Pa,replaceCurrent:function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(()=>[{id:_.id||"",payload:_.payload,params:_.params||{}}])},closeCurrent:()=>{b((_,y)=>_.length>1?_.filter(S=>S!==y):_)},duplicateCurrent:_=>{b((y,S)=>{const m={...S,payload:(_==null?void 0:_.payload)||S.payload,params:(_==null?void 0:_.params)||S.params};return[...y.slice(0,s),m,...y.slice(s)]})},setView:_=>{const y=Lt(r,"view");return x(_?{...y,view:_}:y)},setParams:x,setPayload:g,navigateIntent:l}),[n,p,P,b,l,r,a,h,x,g,s]);return i(Sa.Provider,{value:C,children:e})}function Fs(t,e,n,o){var r,a;const s={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},u=(r=e.minWidth)!=null?r:kt,l=(a=n.minWidth)!=null?a:kt,d=Math.min(e.maxWidth||1/0,s.width-l),h=Math.min(n.maxWidth||1/0,s.width-u);let p=u-t.left.width;const b=t.right.width-h;p<b&&(p=b);let g=t.right.width-l;const x=d-t.left.width;g>x&&(g=x);const P=Math.min(Math.max(o,p),g),C=t.left.width+P,_=t.right.width-P,y=C/s.width*s.flex,S=_/s.width*s.flex;return{leftFlex:y,leftW:C,rightFlex:S,rightW:_}}function zs(t,e){const n=[];let o=e;for(;o!==t;){const r=o.parentElement;if(!r)return n;const s=Array.from(r.childNodes).indexOf(o);if(n.unshift(s),r===t)return n;o=r}return n}const Qn=[];function Bs(t,e){const n=new WeakMap;for(const r of e)n.set(r,zs(t,r));const o=(r,a)=>{const s=n.get(r)||Qn,u=n.get(a)||Qn,l=Math.max(s.length,u.length);for(let d=0;d<l;d+=1){const h=s[d]||-1,p=u[d]||-1;if(h!==p)return h-p}return 0};e.sort(o)}function Ws(){const t=[],e=[],n=new WeakMap,o=new Set,r={};let a=null,s=0,u=null,l=new Map,d=!1;function h(y){o.add(y),u===y&&(u=null),_()}function p(y){o.delete(y),u=y,_()}function b(y,S){return n.set(y,{...S,original:S}),e.push(y),a&&Bs(a,e),p(y),()=>{const m=e.indexOf(y);m>-1&&e.splice(m,1),n.delete(y),_()}}function g(y,S,m){var f,v,O,E;const I=e.indexOf(S),D=n.get(S);if(!D)return;const T=e[I+1],F=n.get(T);if(F){if(y==="start"&&(d=!0,r.left={element:S,flex:D.flex||1,width:S.offsetWidth},r.right={element:T,flex:F.flex||1,width:T.offsetWidth},_()),y==="move"&&r.left&&r.right){l=new Map;const{leftW:R,rightW:A,leftFlex:$,rightFlex:q}=Fs(r,D,F,m);l.set(S,{flex:$,width:R}),l.set(T,{flex:q,width:A}),_()}if(y==="end"){d=!1;const R=l.get(S),A=l.get(T);n.set(S,{...D,currentMinWidth:0,currentMaxWidth:(f=D.maxWidth)!=null?f:1/0,flex:(v=R==null?void 0:R.flex)!=null?v:D.flex}),n.set(T,{...F,currentMinWidth:0,currentMaxWidth:(O=D.maxWidth)!=null?O:1/0,flex:(E=A==null?void 0:A.flex)!=null?E:F.flex}),l=new Map,delete r.left,delete r.right,_()}}}function x(y){a=y}function P(y){s=y,_()}function C(y){return t.push(y),()=>{const S=t.push(y);S>-1&&t.splice(S,1)}}return{collapse:h,expand:p,mount:b,resize:g,setRootElement:x,setRootWidth:P,subscribe:C};function _(){var y,S,m,f;if(!s)return;const v=[];for(const R of e)R!==u&&v.unshift(R);u&&v.unshift(u);const O=new WeakMap,E=v.length,I=v[0],D=(E-1)*yt;let T=s-D;for(const R of v){const A=n.get(R);if(!A)continue;const $=A.currentMinWidth||A.minWidth||kt,q=R===I,N=o.has(R),te=$>T,ae=q?!1:N||te,ie=l.get(R);O.set(R,{element:R,collapsed:ae,currentMinWidth:(y=ie==null?void 0:ie.width)!=null?y:A.currentMinWidth,currentMaxWidth:(S=ie==null?void 0:ie.width)!=null?S:A.currentMaxWidth,flex:(f=(m=ie==null?void 0:ie.flex)!=null?m:A.flex)!=null?f:1}),ae?T-=yt:T-=$-yt}const F=[];for(const R of e){const A=O.get(R);A&&F.push(A)}for(const R of t)R({expandedElement:u||e[e.length-1]||null,panes:F,resizing:d})}}function Vs(t){const{children:e,minWidth:n,onCollapse:o,onExpand:r,...a}=t,s=c.useMemo(()=>Ws(),[]),[u,l]=c.useState(null),d=et(u),h=(d==null?void 0:d.width)||0,p=h===void 0||!n?void 0:h<n,[b,g]=c.useState({expandedElement:null,panes:[],resizing:!1});c.useEffect(()=>s.setRootElement(u),[s,u]),c.useEffect(()=>s.setRootWidth(h),[s,h]),c.useEffect(()=>s.subscribe(g),[s]),c.useEffect(()=>{p!==void 0&&(p&&o&&o(),!p&&r&&r())},[p,o,r]);const x=c.useMemo(()=>({collapse:s.collapse,collapsed:p,expand:s.expand,expandedElement:b.expandedElement,mount:s.mount,panes:b.panes,resize:s.resize,resizing:b.resizing}),[p,s,b.expandedElement,b.panes,b.resizing]);return i(Ea.Provider,{value:x,children:i(wa,{"data-ui":"PaneLayout",...a,"data-collapsed":p?"":void 0,"data-resizing":b.resizing?"":void 0,"data-mounted":h?"":void 0,ref:l,children:e})})}class Se extends Error{constructor(e){let{message:n,context:o,helpId:r,cause:a}=e;super(n),this.context=o,this.helpId=r,this.cause=a}}const Zn=new WeakMap;function it(t){const e=Zn.get(t);if(e)return e;const n=Si();return Zn.set(t,n),n}const eo=new WeakMap;function Go(t,e){const n=eo.get(t)||new Map;if(n){const a=n.get(e);if(a)return a}const o=t[e];if(typeof o!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof o," instead."));const r=o.bind(t);return n.set(e,r),eo.set(t,n),r}const Us=t=>!!t&&typeof(t==null?void 0:t.then)=="function",Hs=t=>pe(t)?typeof t.serialize=="function":!1,$s=t=>(e,n,o)=>{try{return t(e,n,o)}catch(r){throw r instanceof Se?r:new Se({message:typeof(r==null?void 0:r.message)=="string"?r.message:"",context:n,cause:r})}},Gs=t=>function(){return t(...arguments).pipe(Ei(1),wi())};function Yo(t){const e=$s(Gs(t((n,o,r)=>{if(!n)throw new Se({message:"Pane returned no child",context:o,helpId:"structure-item-returned-no-child"});return Us(n)||vi(n)?wo(n).pipe(ot(a=>e(a,o,r))):Hs(n)?e(n.serialize(o),o,r):typeof n=="function"?e(n(o.id,o),o,r):ce(n)})));return e}async function Ys(t){const e=new Map,o=Yo(l=>(d,h,p)=>{const b=d&&"".concat(it(d),"-").concat(h.path.join("__")),g=b&&e.get(b);if(g)return g;const x=l(d,h,p);return b&&e.set(b,x),x}),r=[[{id:"__edit__".concat(t.params.id),params:{...Lt(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function a(l){let{currentId:d,flatIndex:h,intent:p,params:b,parent:g,path:x,payload:P,unresolvedPane:C,levelIndex:_,structureContext:y}=l;var S;if(!C)return[];const{id:m,type:f,...v}=b,E=await zo(o(C,{id:d,splitIndex:0,parent:g,path:x,index:h,params:{},payload:void 0,structureContext:y},h));return E.type==="document"&&E.id===m?[{panes:[...x.slice(0,x.length-1).map(I=>[{id:I}]),[{id:m,params:v,payload:P}]],depthIndex:x.length,levelIndex:_}]:(S=E.canHandleIntent)!=null&&S.call(E,p,b,{pane:E,index:h})||E.type==="documentList"&&E.schemaTypeName===f&&E.options.filter==="_type == $type"?[{panes:[...x.map(I=>[{id:I}]),[{id:b.id,params:v,payload:P}]],depthIndex:x.length,levelIndex:_}]:E.type==="list"&&E.child&&E.items?(await Promise.all(E.items.map((I,D)=>I.type==="divider"?Promise.resolve([]):a({currentId:I._id||I.id,flatIndex:h+1,intent:p,params:b,parent:E,path:[...x,I.id],payload:P,unresolvedPane:typeof E.child=="function"?Go(E,"child"):E.child,levelIndex:D,structureContext:y})))).flat():[]}const u=(await a({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((l,d)=>l.depthIndex===d.depthIndex?l.levelIndex-d.levelIndex:l.depthIndex-d.depthIndex)[0];return u?u.panes:r}function he(){const t=c.useContext(Lr);if(!t)throw new Error("DeskTool: missing context value");return t}const Ks=(t,e)=>{const n=t.replace(/^__edit__/,""),{params:o,payload:r,structureContext:{resolveDocumentNode:a}}=e,{type:s,template:u}=o;if(!s)throw new Error("Document type for document with ID ".concat(n," was not provided in the router params."));let l=a({schemaType:s,documentId:n});return l=l.id("editor").title("Editor"),u&&(l=l.initialValueTemplate(u,r)),l.serialize()};function qs(t){var e,n;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&it(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(n=t.serializeOptions)==null?void 0:n.path}),")")}const to=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?it(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function Ge(t){let{unresolvedPane:e,flattenedRouterPanes:n,parent:o,path:r,resolvePane:a,structureContext:s}=t;const[u,...l]=n,d=l[0],h={id:u.routerPaneSibling.id,splitIndex:u.siblingIndex,parent:o,path:[...r,u.routerPaneSibling.id],index:u.flatIndex,params:u.routerPaneSibling.params||{},payload:u.routerPaneSibling.payload,structureContext:s};try{return a(e,h,u.flatIndex).pipe(ot(p=>{const b={type:"resolvedMeta",...u,paneNode:p,path:h.path},g=l.map((P,C)=>({type:"loading",path:[...h.path,...l.slice(C).map((S,m)=>"[".concat(P.flatIndex+m,"]"))],paneNode:null,...P}));if(!l.length)return ce([b]);let x;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?x=Ge({unresolvedPane:Ks,flattenedRouterPanes:l,parent:o,path:h.path,resolvePane:a,structureContext:s}):u.groupIndex===(d==null?void 0:d.groupIndex)?x=Ge({unresolvedPane:e,flattenedRouterPanes:l,parent:o,path:r,resolvePane:a,structureContext:s}):x=Ge({unresolvedPane:typeof p.child=="function"?Go(p,"child"):p.child,flattenedRouterPanes:l,parent:p,path:h.path,resolvePane:a,structureContext:s}),Do(ce([b,...g]),x.pipe(ue(P=>[b,...P])))}))}catch(p){if(p instanceof Se&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat(No(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return ce([]);throw p}}function Xs(t){let{routerPanesStream:e,rootPaneNode:n,initialCacheState:o={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>bi},structureContext:r}=t;return e.pipe(ue(s=>[[{id:"root"}],...s]),ue(s=>s.flatMap((l,d)=>l.map((h,p)=>({routerPaneSibling:h,groupIndex:d,siblingIndex:p}))).map((l,d)=>({...l,flatIndex:d}))),$a([]),Oi(),ue(s=>{let[u,l]=s;for(let d=0;d<l.length;d++){const h=u[d],p=l[d];if(!Et(h,p))return{flattenedRouterPanes:l,diffIndex:d}}return{flattenedRouterPanes:l,diffIndex:l.length}}),vn((s,u)=>{const{cacheKeysByFlatIndex:l,resolvedPaneCache:d}=s,{flattenedRouterPanes:h,diffIndex:p}=u,b=l.slice(0,p+1),g=l.slice(p+1),x=new Set(b.flatMap(_=>Array.from(_))),P=g.flatMap(_=>Array.from(_)).filter(_=>!x.has(_));for(const _ of P)d.delete(_);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:l,resolvedPaneCache:d,resolvePane:Yo(_=>(y,S,m)=>{const f=y&&"".concat(it(y),"-").concat(qs(S)),v=f&&d.get(f);if(v)return v;const O=_(y,S,m);if(!f)return O;const E=l[m]||new Set;return E.add(f),l[m]=E,d.set(f,O),O})}},o),ot(s=>{let{flattenedRouterPanes:u,resolvePane:l}=s;return Ge({unresolvedPane:n,flattenedRouterPanes:u,parent:null,path:[],resolvePane:l,structureContext:r})})).pipe(vn((s,u)=>u.map((l,d)=>{const h=s[d];return!h||l.type!=="loading"?l:h.routerPaneSibling.id===l.routerPaneSibling.id?h:l}),[]),uo((s,u)=>{if(s.length!==u.length)return!1;for(let l=0;l<u.length;l++){const d=s[l],h=u[l];if(to(d)!==to(h))return!1}return!0}))}function Js(){const t=c.useMemo(()=>new Ga(1),[]),e=c.useMemo(()=>t.asObservable().pipe(ue(o=>(o==null?void 0:o.panes)||[])),[t]),{state:n}=At();return c.useEffect(()=>{t.next(n)},[n,t]),e}function Qs(){const[t,e]=c.useState();if(t)throw t;const{structureContext:n,rootPaneNode:o}=he(),[r,a]=c.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),s=Js();return c.useEffect(()=>{const l=Xs({rootPaneNode:o,routerPanesStream:s,structureContext:n}).pipe(ue(d=>{const h=d.reduce((g,x)=>{const P=g[x.groupIndex]||[];return P[x.siblingIndex]=x.routerPaneSibling,g[x.groupIndex]=P,g},[]),p=h.length,b=d.map(g=>{var x;const{groupIndex:P,flatIndex:C,siblingIndex:_,routerPaneSibling:y,path:S}=g,m=y.id,f=h[P+1];return{active:P===p-2,childItemId:(x=f==null?void 0:f[0].id)!=null?x:null,index:C,itemId:y.id,groupIndex:P,key:"".concat(g.type==="loading"?"unknown":g.paneNode.id,"-").concat(m,"-").concat(_),pane:g.type==="loading"?Ct:g.paneNode,params:y.params||{},path:S.join(";"),payload:y.payload,selected:C===d.length-1,siblingIndex:_}});return{paneDataItems:b,routerPanes:h,resolvedPanes:b.map(g=>g.pane)}})).subscribe({next:d=>a(d),error:d=>e(d)});return()=>l.unsubscribe()},[o,s,n]),r}async function Zs(t,e,n){if(e&&n)return{id:e,type:n};if(!e&&n)return{id:Ya(),type:n};if(e&&!n){const o=await zo(t.resolveTypeForDocument(e));return{id:e,type:o}}throw new Se({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const ec={},tc=c.memo(function(){const{navigate:e}=At(),n=Nt(c.useCallback(l=>{const d=typeof l.intent=="string"?l.intent:void 0;return d?{intent:d,params:pe(l.params)?l.params:ec,payload:l.payload}:void 0},[])),{rootPaneNode:o,structureContext:r}=he(),a=ho(),[s,u]=c.useState(null);if(s)throw s;return c.useEffect(()=>{if(n){const{intent:l,params:d,payload:h}=n;let p=!1;async function b(){const{id:g,type:x}=await Zs(a,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(p)return;const P=await Ys({intent:l,params:{...d,id:g,type:x},payload:h,rootPaneNode:o,structureContext:r});p||e({panes:P},{replace:!0})}return b().catch(u),()=>{p=!0}}},[a,n,e,o,r]),null}),nc=B.span(Cn||(Cn=z([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function oc(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function rc(t){let{error:e}=t;if(!(e instanceof Se))throw e;const{cause:n}=e,o=(n==null?void 0:n.stack)||e.stack,r=o&&!(n instanceof vt)&&!e.message.includes("Module build failed:"),a=n instanceof vt?n.path:[],s=n instanceof vt&&n.helpId||e.helpId,u=c.useCallback(()=>{window.location.reload()},[]);return i(le,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:w(Ae,{children:[i(Ka,{as:"h2",children:"Encountered an error while reading structure"}),w(le,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[a.length>0&&w(oe,{space:2,children:[i(Ot,{children:"Structure path"}),i(Dt,{children:a.slice(1).map((l,d)=>i(nc,{children:l},"".concat(l,"-").concat(d)))})]}),w(oe,{marginTop:4,space:2,children:[i(Ot,{children:"Error"}),i(Dt,{children:r?oc(o):e.message})]}),s&&i(k,{marginTop:4,children:i(j,{children:i("a",{href:No(s),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),i(k,{marginTop:4,children:i(K,{text:"Reload",icon:vo,tone:"primary",onClick:u})})]})]})})}function ac(t){const{isSelected:e,pane:n,paneKey:o}=t,r=pe(n)&&n.type||null;return w(Je,{id:o,selected:e,children:[i(Ze,{title:"Unknown pane type"}),i(Te,{children:i(k,{padding:4,children:typeof r=="string"?w(j,{as:"p",muted:!0,children:["Structure item of type ",i("code",{children:r})," is not a known entity."]}):w(j,{as:"p",muted:!0,children:["Structure item is missing required ",i("code",{children:"type"})," property."]})})})]})}function ic(t){const e=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],n=ce(null);return qa(...e.map(o=>{let{ms:r,message:a}=o;return n.pipe(Xa(a),Ja(r))}))}const sc="Loading…",cc=B(L)(In||(In=z([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),ke=c.memo(t=>{const{delay:e=300,flex:n,message:o=ic,minWidth:r,paneKey:a,path:s,selected:u,title:l,tone:d}=t,h=c.useMemo(()=>typeof o=="function"?o(s?s.split(";"):[]):o,[o,s]),[p,b]=c.useState(()=>typeof h=="string"?h:sc);c.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const y=h.subscribe(b);return()=>y.unsubscribe()},[h]);const[g,x]=c.useState(null),[P,C]=c.useState(!1);return c.useEffect(()=>{if(g)return Fr(()=>C(!0))},[g]),i(Je,{flex:n,id:a,minWidth:r,selected:u,tone:d,children:i(Te,{children:w(cc,{align:"center","data-mounted":P?"":void 0,direction:"column",height:"fill",justify:"center",ref:x,children:[i(nt,{muted:!0}),(l||p)&&i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:l||p})})]})})})});ke.displayName="LoadingPane";const lc={component:c.lazy(()=>Be(()=>import("./index-6208b18a-04f2afbd.js"),["static/index-6208b18a-04f2afbd.js","static/sanity-93b3c6af.js"])),document:c.lazy(()=>Be(()=>import("./index-c3743809-ebbe39c8.js"),["static/index-c3743809-ebbe39c8.js","static/sanity-93b3c6af.js"])),documentList:c.lazy(()=>Be(()=>import("./index-dd3127f7-a9201399.js"),["static/index-dd3127f7-a9201399.js","static/sanity-93b3c6af.js","static/PaneItem-366729eb-09a80c11.js"])),list:c.lazy(()=>Be(()=>import("./index-3c1a9256-07ed5446.js"),["static/index-3c1a9256-07ed5446.js","static/sanity-93b3c6af.js","static/PaneItem-366729eb-09a80c11.js"]))},uc=c.memo(function(e){const{active:n,childItemId:o,groupIndex:r,index:a,itemId:s,pane:u,paneKey:l,params:d,payload:h,path:p,selected:b,siblingIndex:g}=e,x=lc[u.type]||ac;return i(Ls,{flatIndex:a,index:r,params:d,payload:h,siblingIndex:g,children:i(c.Suspense,{fallback:i(ke,{paneKey:l,path:p,selected:b}),children:i(x,{childItemId:o||"",index:a,itemId:s,isActive:n,isSelected:b,paneKey:l,pane:u})})})},(t,e)=>{let{params:n={},payload:o=null,...r}=t,{params:a={},payload:s=null,...u}=e;if(!Et(n,a)||!Et(o,s))return!1;const l=new Set([...Object.keys(r),...Object.keys(u)]);for(const d of l)if(r[d]!==u[d])return!1;return!0});function Ko(t){const{children:e,flex:n,minWidth:o,paneKey:r,title:a="Error",tone:s="critical"}=t;return w(Je,{flex:n,id:r,minWidth:o,tone:s,children:[i(Ze,{title:a}),i(Te,{overflow:"auto",children:i(k,{paddingX:4,paddingY:5,children:e})})]})}function dc(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function pc(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const hc=["patch","commit"],fc=c.memo(function(){const{push:e}=Re(),{documentId:n,documentType:o}=V(),r=zr(n,o),a=c.useRef(r);return c.useEffect(()=>{!r||r===a.current||(r.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:dc(r.op),description:w("details",{children:[i("summary",{children:"Details"}),r.error.message]})}),r.type==="success"&&!hc.includes(r.op)&&e({closable:!0,status:"success",title:pc(r.op)}),a.current=r)},[r,e]),null}),mc=t=>{const{features:e,hasValue:n,changesOpen:o}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:Qa,isDisabled:o||!n}:null},gc=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:Za,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},vc=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:ei,shortcut:"Ctrl+Alt+O"}:null},bc=t=>[vc,mc,gc].filter(Boolean).map(n=>n(t)).filter(n=>n!==null),yc=t=>pe(t)&&typeof t._id=="string"&&typeof t._type=="string";function _c(t){const[e,n]=c.useState(void 0),[o,r]=c.useState(null),{resolveProductionUrl:a}=Qe().document,s=Di(t);if(o)throw o;return c.useEffect(()=>{s.pipe(Eo(500),ot(u=>yc(u)?wo(a({document:u})):ce(void 0)),Ca(u=>{const l=pe(u)&&typeof u.message=="string"?u.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(l))})).subscribe({next:n,error:r})},[a,s]),e}function xc(t,e){const n=e.panePayload||{},o=e.templateName;e.urlTemplate&&o&&o!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(o,'". Using "').concat(o,'".'));const r=o||e.urlTemplate,a=t.filter(l=>l.schemaType===e.documentType),s={...e.templateParams,...typeof n=="object"?n||{}:{}};let u=r;return!r&&a.length===1&&(u=a[0].id),{templateName:u,templateParams:s}}const Pc={},qo=c.memo(t=>{const{children:e,index:n,pane:o,paneKey:r}=t,a=fo(),s=mo(),{actions:u,badges:l,unstable_languageFilter:d}=Qe().document,h=Br(),p=je(),{features:b}=he(),{push:g}=Re(),{options:x,menuItemGroups:P,title:C=null,views:_=[]}=o,y=ge(x),S=y.id,m=wt(S),f=x.type,v=ge(p.params),O=ge(p.payload),{templateName:E,templateParams:I}=c.useMemo(()=>xc(s,{documentType:f,templateName:y.template,templateParams:y.templateParameters,panePayload:O,urlTemplate:v==null?void 0:v.template}),[f,y,v,O,s]),D=Wr({documentId:m,documentType:f,templateName:E,templateParams:I}),T=ge(D),{patch:F}=Vr(m,f),R=Ur(m,f),{validation:A}=Hr(m,f),$=$r(m,f),q=a.get(f),N=(R==null?void 0:R.draft)||(R==null?void 0:R.published)||T.value,te=c.useMemo(()=>u({schemaType:f,documentId:m}),[u,m,f]),ae=c.useMemo(()=>l({schemaType:f,documentId:m}),[l,m,f]),ie=c.useMemo(()=>d({schemaType:f,documentId:m}),[m,f,d]),Xt=ge(A),st=ge(_),G=p.params||Pc,[Jt,Ee]=c.useState(()=>G.path?De(G.path):[]),ar=G.view||st[0]&&st[0].id||null,[ir,sr]=c.useState("closed"),we=!!G.since,[Qt,cr]=c.useState(null),fe=Gr({documentId:m,documentType:f,onError:cr,rev:G.rev,since:G.since}),Zt=H(fe,M=>M.onOlderRevision),en=H(fe,M=>M.revTime),lr=H(fe,M=>M.sinceAttributes),tn=H(fe,M=>M.timelineDisplayed),ur=H(fe,M=>M.timelineReady),me=_c(N),[dr,pr]=c.useState([]);c.useEffect(()=>{const M=h.documentPresence(m).subscribe(U=>{pr(U)});return()=>{M.unsubscribe()}},[m,h]);const nn=!!N,ct=c.useMemo(()=>bc({features:b,hasValue:nn,changesOpen:we,previewUrl:me}),[we,b,nn,me]),lt=G.inspect==="on",on=we?lr:(R==null?void 0:R.published)||null,Ce=$==="connected"&&R.ready&&(ur||!!Qt),rn=c.useMemo(()=>Zt?tn||{_id:N._id,_type:N._type}:N,[Zt,tn,N]),hr=c.useCallback((M,U)=>{p.setParams({...p.params,since:M,rev:U||void 0})},[p]),fr=c.useCallback(M=>{Ee(M),h.setLocation([{type:"document",documentId:m,path:M,lastActiveAt:new Date().toISOString()}])},[m,h,Ee]),mr=c.useCallback(M=>{Ee([])},[Ee]),an=c.useRef(()=>{throw new Error("Nope")});an.current=M=>{F.execute(Yr(M.patches),T.value)};const gr=c.useCallback(M=>an.current(M),[]),vr=c.useCallback(()=>{p.setParams({...G,since:void 0})},[p,G]),ut=c.useCallback(()=>{p.setParams({...G,since:"@lastPublished"})},[p,G]),br=c.useCallback(()=>p.closeCurrent(),[p]),yr=c.useCallback(()=>p.duplicateCurrent(),[p]),Fe=c.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!lt)?p.setParams({...G,inspect:"on"}):p.setParams(Lt(G,"inspect"))},[lt,p,G]),dt=c.useCallback(M=>M.action==="production-preview"&&me?(window.open(me),!0):M.action==="inspect"?(Fe(!0),!0):M.action==="reviewChanges"?(ut(),!0):!1,[ut,me,Fe]),_r=c.useCallback(M=>{for(const U of ct)if(U.shortcut&&Ft(U.shortcut,M)){M.preventDefault(),M.stopPropagation(),dt(U);return}},[dt,ct]),xr=c.useCallback(()=>Fe(!1),[Fe]),[Pr,Sr]=c.useState([]),[Er,sn]=c.useState(),[cn,ln]=c.useState(),[un,dn]=c.useState(),wr=c.useCallback((M,U)=>{ln(Y=>ve(Y,M,U))},[]),Cr=c.useCallback((M,U)=>{dn(Y=>ve(Y,M,U))},[]),Ir=c.useCallback((M,U)=>sn(Y=>ve(Y,M,U)),[]),Or=N._createdAt?"update":"create",pn=c.useMemo(()=>!!(q!=null&&q.liveEdit),[q==null?void 0:q.liveEdit]),pt=N._id?N._id:"dummy-id",Dr=c.useMemo(()=>({...N,_id:pn?wt(pt):Kr(pt)}),[pn,N,pt]),[Ie,ht]=qr({document:Dr,permission:Or}),hn=!(N!=null&&N._id),Mr=c.useMemo(()=>{const M=!ht&&!(Ie!=null&&Ie.granted),U=!fn(q,"update"),Y=hn&&!fn(q,"create");return!Ce||en!==null||M||U||Y||$==="reconnecting"},[$,hn,ht,Ie==null?void 0:Ie.granted,Ce,en,q]),ft=Xr(q,{value:rn,readOnly:Mr,comparisonValue:on,focusPath:Jt,openPath:Pr,collapsedPaths:cn,presence:dr,validation:Xt,collapsedFieldSets:un,fieldGroupState:Er,changesOpen:we}),ze=c.useRef(ft);ze.current=ft;const mt=c.useCallback(M=>{Jr(ze.current,M).forEach(Y=>{Y.type==="expandPath"&&ln(re=>ve(re,Y.path,!1)),Y.type==="expandFieldSet"&&dn(re=>ve(re,Y.path,!1)),Y.type==="setSelectedGroup"&&sn(re=>ve(re,Y.path,Y.groupName))}),Sr(M)},[ze]),kr={actions:te,activeViewId:ar,badges:ae,changesOpen:we,collapsedFieldSets:un,collapsedPaths:cn,compareValue:on,connectionState:$,displayed:rn,documentId:m,documentIdRaw:S,documentType:f,editState:R,focusPath:Jt,menuItems:ct,onBlur:mr,onChange:gr,onFocus:fr,onPathOpen:mt,onHistoryClose:vr,onHistoryOpen:ut,onInspectClose:xr,onKeyUp:_r,onMenuAction:dt,onPaneClose:br,onPaneSplit:yr,onSetActiveFieldGroup:Ir,onSetCollapsedPath:wr,onSetCollapsedFieldSet:Cr,index:n,inspectOpen:lt,validation:Xt,menuItemGroups:P||[],paneKey:r,previewUrl:me,ready:Ce,schemaType:q,isPermissionsLoading:ht,permissions:Ie,setTimelineMode:sr,setTimelineRange:hr,timelineError:Qt,timelineMode:ir,timelineStore:fe,title:C,value:N,views:st,formState:ft,unstable_languageFilter:ie};return c.useEffect(()=>{$==="reconnecting"&&g({id:"sanity/desk/reconnecting",status:"warning",title:i(W,{children:"Connection lost. Reconnecting…"})})},[$,g]),c.useEffect(()=>{var M;if(Ce&&G.path){const{path:U,...Y}=G,re=Qr((M=ze.current)==null?void 0:M.value,De(U));Ee(re),mt(re),p.setParams(Y)}},[G,m,mt,Ce,p]),i(Zr.Provider,{value:kr,children:e})});qo.displayName="DocumentPaneProvider";const Sc={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},Ec={create:yn,delete:Ci,discardDraft:Me,initial:yn,editDraft:_n,editLive:_n,publish:Ao,unpublish:Ii};function Xo(t){return Sc[t]}function wc(t){return Ec[t]}function Cc(t){let{maxLength:e,userIds:n}=t;return i(Io,{maxLength:e,children:n.map(o=>i(Oo,{user:o,withTooltip:!0},o))})}const Ye=B(L)(t=>{let{theme:e}=t;var n;const o=(n=e.sanity.color.base.skeleton)==null?void 0:n.from;return de(On||(On=z([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),o)}),Ic=B(K)(t=>{let{$selected:e}=t;return de(Dn||(Dn=z([`
    position: relative;
    width: 100%;

    /* Line styling */
    &[data-first] `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &[data-last] `,`::before {
      height: 50%;
    }

    `,`
  `])),Ye,Ye,e&&de(Mn||(Mn=z([`
      `,`::before {
        background: transparent;
      }
    `])),Ye))}),Oc=B(k)(kn||(kn=z([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),Dc=B(j)(Tn||(Tn=z([`
  text-transform: capitalize;
`]))),Mc=B(k)(Rn||(Rn=z([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(be(e.sanity.space[1]))}),no={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function kc(t){let{chunk:e,isFirst:n,isLast:o,isLatest:r,isSelected:a,onSelect:s,timestamp:u,type:l}=t;const d=wc(l),h=Array.from(e.authors),p=c.useMemo(()=>{const g=new Date(u);return Co(g,"MMM d, yyyy, hh:mm a")},[u]),b=c.useCallback(g=>{g.preventDefault(),g.stopPropagation(),s(e)},[s,e]);return i(Ic,{$selected:a,"data-chunk-id":e.id,"data-first":n?!0:void 0,"data-last":o?!0:void 0,"data-ui":"timelineItem",mode:a?"default":"bleed",onClick:b,padding:0,radius:2,tone:a?"primary":no[e.type],children:i(k,{paddingX:2,children:w(L,{align:"stretch",children:[i(Ye,{align:"center",children:i(Oc,{padding:2,children:i(j,{size:2,children:d&&c.createElement(d)})})}),w(oe,{space:2,margin:2,children:[r&&i(L,{children:i(le,{padding:1,radius:2,shadow:1,tone:a?"primary":no[e.type],children:i(Ot,{muted:!0,size:0,children:"Latest"})})}),i(k,{children:i(Dc,{size:1,weight:"medium",children:Xo(l)||i("code",{children:l})})}),i(Mc,{paddingX:1,children:i(j,{size:0,muted:!0,children:p})})]}),i(L,{flex:1,justify:"flex-end",align:"center",children:i(Cc,{maxLength:3,userIds:h})})]})})})}const Tc=B(oe)(jn||(jn=z([`
  max-width: 200px;
`]))),Rc=B(L)(An||(An=z([`
  max-height: calc(100vh - 198px);
  min-width: 244px;
`]))),jc=B(k)(t=>{let{$visible:e}=t;return de(Nn||(Nn=z([`
    opacity: 0;
    pointer-events: none;

    `,`
  `])),e&&de(Ln||(Ln=z([`
      opacity: 1;
      pointer-events: auto;
    `]))))}),jt=t=>{let{chunks:e,disabledBeforeFirstChunk:n,hasMoreChunks:o,lastChunk:r,onLoadMore:a,onSelect:s,firstChunk:u}=t;const[l,d]=c.useState(!1),h=c.useMemo(()=>e.filter(g=>n&&u?g.index<u.index:!0),[e,n,u]),p=c.useMemo(()=>r!=null&&r.id?h.findIndex(g=>g.id===r.id):-1,[r==null?void 0:r.id,h]),b=c.useCallback((g,x)=>{let{activeIndex:P}=x;const C=P===0,_=h&&P===h.length-1||!1;return w(k,{paddingBottom:_?1:0,paddingTop:C?1:0,paddingX:1,children:[i(kc,{chunk:g,isFirst:C,isLast:_,isLatest:P===0&&!n,isSelected:P===p,onSelect:s,timestamp:g.endTimestamp,type:g.type}),P===h.length-1&&o&&i(L,{align:"center",justify:"center",padding:4,children:i(nt,{muted:!0})})]})},[n,h,o,s,p]);return c.useEffect(()=>d(!0),[]),w(jc,{$visible:!p||l,"data-ui":"timeline",children:[h.length===0&&w(Tc,{padding:3,space:3,children:[i(j,{size:1,weight:"semibold",children:"No document history"}),i(j,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),h.length>0&&i(Rc,{direction:"column",children:i(yi,{activeItemDataAttr:"data-hovered",ariaLabel:"Document revisions",autoFocus:"list",initialIndex:p,initialScrollAlign:"center",itemHeight:40,items:h,onEndReached:a,onEndReachedIndexOffset:20,overscan:5,renderItem:b,wrapAround:!1})})]})};jt.displayName="Timeline";function Ac(){return w(L,{align:"flex-start",gap:3,padding:4,children:[i(bt,{tone:"critical",children:i(Lo,{})}),w(oe,{space:4,children:[i(bt,{size:1,tone:"critical",weight:"semibold",children:"An error occurred whilst retrieving document changes."}),i(bt,{size:1,tone:"critical",children:"Document history transactions have not been affected."})]})]})}const Nc=B(zt)(Fn||(Fn=z([`
  overflow: hidden;
  overflow: clip;
`])));function Jo(t){let{chunk:e,mode:n,placement:o}=t;const{setTimelineRange:r,setTimelineMode:a,timelineError:s,ready:u,timelineStore:l}=V(),[d,h]=c.useState(!1),[p,b]=c.useState(null),[g,x]=c.useState(null),P=Re(),C=H(l,N=>N.chunks),_=H(l,N=>N.isLoading),y=H(l,N=>N.hasMoreChunks),S=H(l,N=>N.realRevChunk),m=H(l,N=>N.sinceTime),f=c.useCallback(()=>{a(n),h(!0)},[n,a]),v=c.useCallback(()=>{a("closed"),h(!1)},[a]),O=c.useCallback(()=>{d&&v()},[v,d]),E=c.useCallback(N=>{d&&(N.key==="Escape"||N.key==="Tab")&&(v(),p==null||p.focus())},[p,v,d]);Vt(O,[p,g]),Ut(E);const I=c.useCallback(N=>{try{const[te,ae]=l.findRangeForRev(N);a("closed"),r(te,ae)}catch(te){P.push({closable:!0,description:te.message,status:"error",title:"Unable to load revision"})}},[a,r,l,P]),D=c.useCallback(N=>{try{const[te,ae]=l.findRangeForSince(N);a("closed"),r(te,ae)}catch(te){P.push({closable:!0,description:te.message,status:"error",title:"Unable to load revision"})}},[a,r,l,P]),T=c.useCallback(()=>{_||l.loadMore()},[_,l]),F=s?i(Ac,{}):w(W,{children:[n==="rev"&&i(jt,{chunks:C,firstChunk:S,hasMoreChunks:y,lastChunk:S,onLoadMore:T,onSelect:I}),n==="since"&&i(jt,{chunks:C,disabledBeforeFirstChunk:!0,firstChunk:S,hasMoreChunks:y,lastChunk:m,onLoadMore:T,onSelect:D})]}),R=Lc((e==null?void 0:e.endTimestamp)||""),A=e?"".concat(Ia(Xo(e.type)),": ").concat(R):"Latest version",$=e?"Since: ".concat(R):"Since: unknown version";return i(Nc,{constrainSize:!0,content:d&&F,"data-ui":"versionMenu",open:d,placement:o,portal:!0,ref:x,children:i(K,{disabled:!u,mode:"bleed",fontSize:1,padding:2,iconRight:Oa,onClick:d?v:f,ref:b,selected:d,text:u?n==="rev"?A:$:"Loading history"})})}function Lc(t){return c.useMemo(()=>{const n=t?new Date(t):new Date;return Co(n,"MMM d, yyyy, hh:mm a")},[t])}function Fc(){return i($o,{ms:300,children:w(L,{align:"center",direction:"column",height:"fill",justify:"center",paddingTop:3,children:[i(nt,{muted:!0}),i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:"Loading changes"})})]})})}function zc(t){const e=new Map;return ti(t,n=>{if(n.action==="unchanged"||!("annotation"in n)||!n.annotation)return!0;const{author:o,timestamp:r}=n.annotation,a=e.get(o);return(!a||a.timestamp<r)&&e.set(o,n.annotation),!0}),Array.from(e.values()).sort((n,o)=>n.timestamp<o.timestamp?1:-1)}const Bc=B(go)(zn||(zn=z([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function Wc(){const{documentId:t,onHistoryClose:e,schemaType:n,timelineError:o,timelineStore:r,value:a}=V(),{collapsed:s}=bo(),u=c.useRef(null),l=H(r,C=>C.diff),d=H(r,C=>C.onOlderRevision),h=H(r,C=>C.selectionState),p=H(r,C=>C.sinceTime),b=h==="loading",g=!d,x=Pe.useMemo(()=>({documentId:t,schemaType:n,FieldWrapper:Da,rootDiff:l,isComparingCurrent:g,value:a}),[t,l,g,n,a]),P=Pe.useMemo(()=>l?zc(l):[],[l]);return s?null:w(L,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[i(Ze,{actions:i(K,{icon:Me,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:P.length>0&&i(k,{paddingRight:1,children:i(Ma,{annotations:P,description:"Changes by",placement:"bottom-end",children:i(Io,{maxLength:4,children:P.map(C=>{let{author:_}=C;return i(Oo,{user:_},_)})})})}),tabs:i(Jo,{mode:"since",chunk:p,placement:"bottom-start"}),title:"Changes"}),i(Te,{children:i(Wt,{element:u.current,children:i(Bc,{"data-ui":"Scroller",ref:u,children:i(k,{flex:1,padding:4,children:i(Vc,{diff:l,documentContext:x,error:o,loading:b})})})})})]})}function Vc(t){let{error:e,diff:n,documentContext:o,loading:r}=t;const{schemaType:a}=V();return e?i(gn,{}):r?i(Fc,{}):n?i(ka.Provider,{value:o,children:i(Ta,{diff:n,schemaType:a})}):i(gn,{})}function Uc(t,e,n){const o=ea(),[r,a]=c.useState(n),s=c.useMemo(()=>o.forNamespace("desk-tool"),[o]),u=c.useMemo(()=>t?s.forNamespace(t).forKey(e):s.forKey(e),[s,t,e]);c.useEffect(()=>{const d=u.listen(n).subscribe({next:a});return()=>d==null?void 0:d.unsubscribe()},[n,e,t,u]);const l=c.useCallback(d=>{a(d),u.set(d)},[u]);return c.useMemo(()=>[r,l],[l,r])}const ye={id:"parsed",title:"Parsed"},_e={id:"raw",title:"Raw JSON"},Hc=[ye,_e],Xe=js(1e3);function Qo(t,e){const n=Xe.get(t);return n===void 0?(Xe.set(t,Array.isArray(e)||pe(e)),Qo(t,e)):n}function $c(t){const{path:e}=t,n=Xe.get(e);n!==void 0&&Xe.set(e,!n)}function Zo(t){const e=window.getSelection();if(e){const n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t),e.addRange(n)}}function oo(t){Zo(t.currentTarget)}function Gc(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),Zo(t.currentTarget))}function Yc(t){return pe(t)&&bn(t._id)&&bn(t._type)}const Kc=B.div(t=>{let{theme:e}=t;const{color:n,fonts:o,space:r}=e.sanity;return de(Bn||(Bn=z([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),o.code.family,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(r[4]),be(r[3]),be(r[4]),o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(r[4]/2),n.syntax.property,n.syntax.constant,be(r[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function qc(t){const{onChange:e,query:n}=t,o=c.useCallback(r=>e(r.target.value),[e]);return i(_i,{icon:xi,onChange:o,placeholder:"Search",radius:2,value:n||""})}function Xc(t){const{value:e}=t,{onInspectClose:n,paneKey:o}=V(),r="".concat(o,"_inspect_"),[a,s]=Uc("desk-tool","inspect-view-preferred-view-mode-".concat(o),"parsed"),u=Hc.find(h=>h.id===a),l=c.useCallback(()=>{s(ye.id)},[s]),d=c.useCallback(()=>{s(_e.id)},[s]);return i($t,{id:"".concat(r,"dialog"),header:Yc(e)?w(W,{children:["Inspecting"," ",i("em",{children:i(ni,{document:e})})]}):i("em",{children:"No value"}),onClose:n,onClickOutside:n,width:3,children:w(L,{direction:"column",height:"fill",children:[i(le,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:w(Mo,{space:1,children:[i(It,{"aria-controls":"".concat(r,"tabpanel"),fontSize:1,id:"".concat(r,"tab-").concat(ye.id),label:ye.title,onClick:l,selected:u===ye}),i(It,{"aria-controls":"".concat(r,"tabpanel"),fontSize:1,id:"".concat(r,"tab-").concat(_e.id),label:_e.title,onClick:d,selected:u===_e})]})}),w(oi,{"aria-labelledby":"".concat(r,"tab-").concat(a),flex:1,id:"".concat(r,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[u===ye&&i(Kc,{children:i(Ts,{data:e,isExpanded:Qo,onClick:$c,search:qc})}),u===_e&&i(Dt,{language:"json",tabIndex:0,onKeyDown:Gc,onDoubleClick:oo,onFocus:oo,children:JSON.stringify(e,null,2)})]})]})})}const Jc=B(le)(Wn||(Wn=z([`
  position: relative;
  z-index: 50;
`]))),ro=B(j)(Vn||(Vn=z([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),er=c.memo(()=>{var t,e,n,o,r,a;const s=ta(),{params:u,groupIndex:l,routerPanesState:d,replaceCurrent:h,BackLink:p}=je(),b=(t=d[l])==null?void 0:t[0].id,g=d[l-1],x=g==null?void 0:g[0],P=x==null?void 0:x.id,C=!!((e=x==null?void 0:x.params)!=null&&e.rev),_=c.useMemo(()=>(u==null?void 0:u.parentRefPath)&&De(u.parentRefPath)||null,[u==null?void 0:u.parentRefPath]),y=na(()=>{const f=_==null?void 0:_[0];if(!P||!f||!_)return ce({loading:!1});const v=wt(P),O=De(f),E=O.findIndex(I=>typeof I=="object"&&"_key"in I);return Do(ce({loading:!0}),s.unstable_observePathsDocumentPair(v,E===-1?O:O.slice(0,E)).pipe(Eo(750),ue(I=>{let{draft:D,published:T}=I;var F;return{loading:!1,result:{availability:{draft:D.availability,published:T.availability},refValue:(F=Ra(D.snapshot||T.snapshot,_))==null?void 0:F._ref}}})))},[s,P,_],{loading:!0}),S=c.useCallback(()=>{var f;y.loading||(f=y.result)!=null&&f.refValue&&h({id:y.result.refValue,params:u})},[y.loading,y.result,h,u]);return!P||!_||C||y.loading||!((n=y.result)!=null&&n.availability.draft.available)&&!((o=y.result)!=null&&o.availability.published.available)||((r=y.result)==null?void 0:r.refValue)===b?null:i(Jc,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:i(Ae,{paddingX:4,paddingY:2,sizing:"border",width:1,children:w(L,{align:"center",children:[i(j,{size:1,children:i(Bt,{})}),(a=y.result)!=null&&a.refValue?w(W,{children:[i(k,{flex:1,marginLeft:3,children:i(ro,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),i(k,{marginLeft:3,children:i(K,{onClick:S,icon:vo,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):w(W,{children:[i(k,{flex:1,marginLeft:3,children:i(ro,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),i(k,{marginLeft:3,children:i(K,{as:p,icon:Me,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});er.displayName="ReferenceChangedBanner";const Qc=B(le)(Un||(Un=z([`
  position: relative;
  z-index: 50;
`])));function Zc(t){let{granted:e,requiredPermission:n}=t;var o,r;const a=ri(),s=((o=a==null?void 0:a.roles)==null?void 0:o.length)!==1,u=el(((r=a==null?void 0:a.roles)==null?void 0:r.map(l=>i("code",{children:l.title},l.name)))||[],", ");return e?null:i(Qc,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:i(Ae,{paddingX:4,paddingY:3,sizing:"border",width:1,children:w(L,{align:"flex-start",children:[i(j,{size:1,children:i(ai,{})}),i(k,{flex:1,marginLeft:3,children:w(j,{size:1,children:["Your role",s&&"s"," ",u," ",s?"do":"does"," not have permissions to"," ",n," this document."]})})]})})})}function el(t,e){return t.reduce((n,o)=>n===null?[o]:n.concat([e,o]),null)}function tl(t){const e=c.useRef();return c.useEffect(()=>{e.current=t},[t]),e.current}const nl=1e3*60*60*24*24;function ol(t){const e=Re(),n=tl(t.enabled);c.useEffect(()=>{!n&&t.enabled&&e.push({...t,duration:nl}),n&&!t.enabled&&e.push({...t,duration:.01})},[t,e,n])}const rl=t=>t.preventDefault();function al(t){var e;const{hidden:n,margins:o}=t,{collapsedFieldSets:r,collapsedPaths:a,displayed:s,editState:u,documentId:l,documentType:d,onChange:h,validation:p,ready:b,formState:g,onFocus:x,onBlur:P,onSetCollapsedPath:C,onPathOpen:_,onSetCollapsedFieldSet:y,onSetActiveFieldGroup:S}=V(),m=ho(),f=ii(l),v=c.useMemo(()=>si(),[]),O=(e=u==null?void 0:u.transactionSyncLock)==null?void 0:e.enabled;ol({id:"sync-lock-".concat(l),status:"warning",enabled:O,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),c.useEffect(()=>{const D=m.pair.documentEvents(l,d).pipe(ci(T=>{T.type==="mutation"&&v.publish(il(T)),T.type==="rebase"&&v.publish(sl(T))})).subscribe();return()=>{D.unsubscribe()}},[l,m,d,v]);const E=!!(s!=null&&s._rev);c.useEffect(()=>{E&&v.publish({type:"mutation",patches:[],snapshot:s})},[E]);const I=c.useRef(null);return c.useEffect(()=>{b&&!(g!=null&&g.focusPath.length)&&li(I.current)},[b]),i(Ae,{hidden:n,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:i(ui,{margins:o,children:i(k,{as:"form",onSubmit:rl,ref:I,children:b?g===null?i(k,{padding:2,children:i(j,{children:"This form is hidden"})}):i(di,{__internal_patchChannel:v,collapsedFieldSets:r,collapsedPaths:a,focusPath:g.focusPath,changed:g.changed,focused:g.focused,groups:g.groups,id:"root",members:g.members,onChange:h,onFieldGroupSelect:S,onPathBlur:P,onPathFocus:x,onPathOpen:_,onSetFieldSetCollapsed:y,onSetPathCollapsed:C,presence:f,readOnly:g.readOnly,schemaType:g.schemaType,validation:p,value:g.value}):i($o,{ms:300,children:w(L,{align:"center",direction:"column",height:"fill",justify:"center",children:[i(nt,{muted:!0}),i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function il(t){const e=t.mutations.map(n=>n.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:Mt(t.origin,e)}}function sl(t){const e=t.remoteMutations.map(o=>o.patch).filter(Boolean),n=t.localMutations.map(o=>o.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:Mt("remote",e).concat(Mt("local",n))}}function cl(){const{activeViewId:t,paneKey:e,views:n}=V(),o="".concat(e,"tabpanel");return i(Mo,{space:1,children:n.map((r,a)=>{var s;return i(ll,{icon:r.icon,id:"".concat(e,"tab-").concat(r.id),isActive:t===r.id,label:i(W,{children:r.title}),tabPanelId:o,viewId:a===0?null:(s=r.id)!=null?s:null},r.id)})})}function ll(t){const{isActive:e,tabPanelId:n,viewId:o}=t,{ready:r}=V(),{setView:a}=je(),s=c.useCallback(()=>a(o),[a,o]);return i(It,{...t,"aria-controls":n,disabled:!r,fontSize:1,selected:e,onClick:s})}const St={error:{tone:"critical",icon:Lo},warning:{tone:"caution",icon:Bt},info:{tone:"primary",icon:pi}};function ul(t){const{boundaryElement:e,isOpen:n,setOpen:o}=t,{onFocus:r,onPathOpen:a,schemaType:s,validation:u}=V(),l=c.useId(),d=u.length>0,h=u.some(ja),p=u.some(Aa),b=u.some(Na),g=c.useMemo(()=>{if(h)return St.error;if(p)return St.warning;if(b)return St.info},[h,b,p]),x=c.useCallback(C=>{a(C),r(C)},[r,a]),P=c.useCallback(()=>o(!1),[o]);return d?i(ko,{id:l||"",button:i(K,{...g,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:i(To,{open:n,children:i(La,{documentType:s,validation:u,onClose:P,onFocus:x})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function dl(){const{connectionState:t,schemaType:e,title:n,value:o}=V(),r=!!o&&t==="connected",{error:a,value:s}=Fa({enabled:r,schemaType:e,value:o});return t!=="connected"?i(W,{}):n?i(W,{children:n}):o?a?w(W,{children:["Error: ",a.message]}):i(W,{children:(s==null?void 0:s.title)||i("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):w(W,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const pl=t=>!!t.showAsAction,hl=oa(pl),tr=c.memo(c.forwardRef((t,e)=>{let{rootElement:n}=t;const{onMenuAction:o,onPaneClose:r,onPaneSplit:a,validation:s,menuItems:u,menuItemGroups:l,schemaType:d,timelineStore:h,ready:p,views:b,unstable_languageFilter:g}=V(),{features:x}=he(),{index:P,BackLink:C,hasGroupSiblings:_}=je(),y=c.useMemo(()=>u.filter(hl),[u]),[S,m]=Pe.useState(!1),f=b.length>1,v=x.reviewChanges,O=H(h,A=>A.revTime),{collapsed:E,isLast:I}=bo(),D=I&&!E?-1:0,T=x.splitViews&&a&&b.length>1,F=T&&_,R=!F&&!x.backButton;return i(Ze,{ref:e,loading:!p,title:i(dl,{}),tabs:f&&i(cl,{}),tabIndex:D,backButton:x.backButton&&P>0&&i(K,{as:C,"data-as":"a",icon:ra,mode:"bleed"}),subActions:v&&i(Jo,{chunk:O,mode:"rev",placement:"bottom-end"}),actions:w(yo,{space:1,children:[g.length>0&&i(W,{children:g.map((A,$)=>c.createElement(A,{key:"language-filter-".concat($),schemaType:d}))}),s.length>0&&i(ul,{boundaryElement:n,isOpen:S,setOpen:m},"validation-menu"),i(aa,{itemGroups:l,items:y,onAction:o},"context-menu"),T&&i(K,{icon:ia,mode:"bleed",onClick:a,title:"Split pane right"},"split-pane-button"),F&&i(K,{icon:Me,mode:"bleed",onClick:r,title:"Close split pane"},"close-view-button"),R&&i(K,{icon:Me,mode:"bleed",title:"Close pane group",as:C},"close-view-button")]})})}));tr.displayName="DocumentPanelHeader";const fl=B(go)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:de(Hn||(Hn=z([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),ml=function(e){const{footerHeight:n,isInspectOpen:o,rootElement:r,setDocumentPanelPortalElement:a}=e,{activeViewId:s,displayed:u,documentId:l,editState:d,value:h,views:p,ready:b,schemaType:g,permissions:x,isPermissionsLoading:P}=V(),{collapsed:C}=xo(),_=Ro(),{features:y}=he(),[S,m]=c.useState(null),f=et(S),v=c.useRef(null),[O,E]=c.useState(null),I=h._createdAt?"update":"create",D=c.useMemo(()=>p.find(q=>q.id===s)||p[0]||{type:"form"},[s,p]),T=y.splitPanes&&v.current||_.element,F=c.useMemo(()=>C?[(f==null?void 0:f.height)||0,0,n?n+2:2,0]:[0,0,2,0],[C,n,f]),R=D.type!=="form",A=c.useMemo(()=>D.type==="component"&&D.component&&c.createElement(D.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:u||h,historical:u,published:(d==null?void 0:d.published)||null},documentId:l,options:D.options,schemaType:g}),[D,u,l,d==null?void 0:d.draft,d==null?void 0:d.published,g,h]);c.useEffect(()=>{O!=null&&O.scrollTo&&O.scrollTo(0,0)},[l,O]),c.useEffect(()=>{T&&a(T)},[T,a]);const $=c.useMemo(()=>o?i(Xc,{value:u||h}):null,[o,u,h]);return w(L,{direction:"column",flex:2,overflow:C?void 0:"hidden",children:[i(tr,{rootElement:r,ref:m}),i(Te,{children:i(tt,{element:T,__unstable_elements:{documentScrollElement:O},children:i(Wt,{element:O,children:w(za,{scrollElement:O,children:[D.type==="form"&&!P&&b&&w(W,{children:[i(Zc,{granted:!!(x!=null&&x.granted),requiredPermission:I}),i(er,{})]}),w(fl,{$disabled:C||!1,"data-testid":"document-panel-scroller",ref:E,children:[i(al,{hidden:R,margins:F},l+(b?"_ready":"_pending")),A]}),$,i("div",{"data-testid":"document-panel-portal",ref:v})]})})})})]})},nr=["left","bottom"],gl={small:0,medium:1,large:2,full:"auto"};function vl(t){const{dialog:e,referenceElement:n}=t;return i(zt,{content:i(bl,{dialog:e}),fallbackPlacements:nr,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function bl(t){const{dialog:e}=t,{cancelButtonIcon:n,cancelButtonText:o,confirmButtonIcon:r,confirmButtonText:a,message:s,onCancel:u,onConfirm:l,tone:d}=e,{isTopLayer:h}=Fo(),[p,b]=c.useState(null),g=c.useCallback(()=>{h&&u()},[h,u]),x=c.useCallback(P=>{P.key==="Escape"&&h&&u()},[h,u]);return Vt(g,[p]),Ut(x),w(L,{direction:"column",ref:b,style:{minWidth:320-16,maxWidth:400},children:[i(k,{flex:1,overflow:"auto",padding:4,children:i(j,{children:s})}),i(k,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:w(Pi,{columns:2,gap:2,children:[i(K,{icon:n,onClick:u,mode:"ghost",text:o||"Cancel"}),i(K,{icon:r,onClick:l,text:a||"Confirm",tone:d})]})})]})}function yl(t){const{dialog:e}=t,n=c.useId(),o=e.footer&&i(k,{paddingX:4,paddingY:3,children:e.footer});return i(Ht,{zOffset:"fullscreen",children:i($t,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:o,header:e.header,id:n,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:gl[e.width],children:i(k,{padding:4,children:e.content})})})}function _l(t){const{dialog:e,referenceElement:n}=t;return i(zt,{content:i(xl,{dialog:e}),fallbackPlacements:nr,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function xl(t){const{dialog:e}=t,{content:n,onClose:o}=e,{isTopLayer:r}=Fo(),[a,s]=c.useState(null),u=c.useCallback(()=>{r&&o()},[r,o]),l=c.useCallback(d=>{d.key==="Escape"&&r&&o()},[r,o]);return Vt(u,[a]),Ut(l),i("div",{ref:s,children:n})}function ao(t){const{children:e}=t,{element:n,elements:o}=Ro(),r=(o==null?void 0:o[Po])||n;return i(tt,{element:r,children:e})}function qt(t){const{dialog:e,referenceElement:n=null}=t,o=c.useId();if(e.type==="confirm")return i(vl,{dialog:e,referenceElement:n});if(e.type==="popover")return i(_l,{dialog:e,referenceElement:n});if(e.type==="dialog"||!e.type)return i(ao,{children:i(yl,{dialog:e})});if(e.type==="custom")return i(ao,{children:e==null?void 0:e.component});const r=e;return console.warn("Unsupported modal type ".concat(r.type)),i($t,{id:o,onClose:r.onClose,onClickOutside:r.onClose,width:2,children:i(k,{padding:4,children:r.content||w(W,{children:["Unexpected modal type (",i("code",{children:r.type}),")"]})})})}function Pl(t){const{actionStates:e,disabled:n}=t,o=c.useId(),r=c.useRef(null),[a,s]=c.useState(-1),[u,l]=c.useState(null),d=c.useCallback(b=>{s(b)},[]),h=c.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=e[a];return w(W,{children:[i(ko,{id:"".concat(o,"-action-menu"),button:i(K,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:n,icon:hi,mode:"ghost",ref:r}),menu:i(To,{padding:1,children:e.map((b,g)=>i(Sl,{actionState:b,disabled:n,index:g,onAction:d},g))}),popover:h,ref:l}),p&&p.dialog&&i(Ht,{zOffset:"paneFooter",children:i(qt,{dialog:p.dialog,referenceElement:u})})]})}function Sl(t){const{actionState:e,disabled:n,index:o,onAction:r}=t,{onHandle:a}=e,s=c.useCallback(()=>{r(o),a&&a()},[o,r,a]),u=e.title&&i(k,{padding:2,children:i(j,{size:1,children:e.title})});return i(fi,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:n||!!e.disabled,onClick:s,padding:0,tone:e.tone,children:i(Le,{content:u,disabled:!u,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:w(L,{align:"center",paddingX:3,children:[w(L,{flex:1,paddingY:3,children:[e.icon&&i(k,{marginRight:3,children:w(j,{children:[c.isValidElement(e.icon)&&e.icon,mi.isValidElementType(e.icon)&&c.createElement(e.icon)]})}),i(j,{children:e.label})]}),e.shortcut&&i(k,{marginLeft:3,children:i(jo,{keys:String(e.shortcut).split("+").map(l=>l.slice(0,1).toUpperCase()+l.slice(1))})})]})})})}function or(t){const{disabled:e,showMenu:n,states:o}=t,[r,...a]=o,[s,u]=c.useState(null),l=c.useMemo(()=>!r||!r.title&&!r.shortcut?null:w(L,{padding:2,style:{maxWidth:300},align:"center",children:[i(j,{size:1,children:r.title}),r.shortcut&&i(k,{marginLeft:r.title?2:0,children:i(jo,{keys:String(r.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[r]);return w(L,{children:[r&&i(Ba,{zOffset:200,children:i(Le,{disabled:!l,content:l,portal:!0,placement:"top",children:i(oe,{flex:1,children:i(K,{"data-testid":"action-".concat(r.label),disabled:e||!!r.disabled,icon:r.icon,onClick:r.onHandle,ref:u,text:r.label,tone:r.tone||"primary"})})})}),n&&a.length>0&&i(k,{marginLeft:1,children:i(Pl,{actionStates:a,disabled:e})}),r&&r.dialog&&i(qt,{dialog:r.dialog,referenceElement:s})]})}const El=c.memo(function(){const{actions:e,connectionState:n,documentId:o,editState:r}=V();return!e||!r?null:i(Kt,{actions:e,actionProps:r,children:a=>{let{states:s}=a;return i(or,{disabled:n!=="connected",showMenu:e.length>1,states:s},o)}})}),wl=c.memo(function(){const{connectionState:e,editState:n,timelineStore:o}=V(),r=H(o,d=>d.revTime),a=(r==null?void 0:r.id)||"",s=((n==null?void 0:n.draft)||(n==null?void 0:n.published)||{})._rev===a,u=c.useMemo(()=>({...n||{},revision:a}),[n,a]),l=c.useMemo(()=>[sa],[]);return i(Kt,{actions:l,actionProps:u,children:d=>{let{states:h}=d;return i(or,{disabled:e!=="connected"||!!s,showMenu:!1,states:h})}})}),Cl={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Il(t){let{states:e}=t;return i(yo,{space:1,children:e.map((n,o)=>i(Le,{content:n.title&&i(k,{padding:2,children:i(j,{size:1,children:n.title})}),disabled:!n.title,placement:"top",portal:!0,children:i(gi,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:n.color?Cl[n.color]:void 0,style:{whiteSpace:"nowrap"},children:n.label})},String(o)))})}function Ol(){const{badges:t,editState:e}=V();return!e||!t?null:i(As,{badges:t,badgeProps:e,children:n=>{let{states:o}=n;return i(Il,{states:o})}})}const Dl=B(L)($n||($n=z([`
  cursor: default;
`])));function Ml(t){const{collapsed:e,disabled:n,lastPublished:o,lastUpdated:r,liveEdit:a}=t,s=xe(o||"",{minimal:!0,agoSuffix:!0}),u=xe(o||"",{minimal:!0}),l=xe(r||"",{minimal:!0,agoSuffix:!0}),d=xe(r||"",{minimal:!0});return i(Dl,{align:"center","data-ui":"SessionLayout",sizing:"border",children:i(Le,{placement:"top",portal:!0,content:i(oe,{padding:3,space:3,children:i(j,{size:1,muted:!0,children:a?w(W,{children:["Last updated ",r?l:s]}):w(W,{children:["Last published ",s]})})}),children:i(K,{mode:"bleed",tone:a?"critical":"positive",tabIndex:-1,disabled:n,children:w(L,{align:"center",children:[i(k,{marginRight:e?0:3,children:i(j,{size:2,children:a?i(Wa,{}):i(Ao,{})})}),!e&&i(j,{size:1,weight:"medium",children:a?i(W,{children:r?d:u}):u})]})})})})}const kl=B(Ne.path)(Gn||(Gn=z([`
  transform-origin: center;
`]))),Tl=t=>i(Ne.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Rl=t=>i(kl,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),jl=t=>i(Ne.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),Al=t=>i(Ne.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Nl=ca(Yn||(Yn=z([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Ll=B.g(Kn||(Kn=z([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Nl),Fl={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},zl={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},Bl={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},Wl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},Vl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function Ul(t){const{status:e}=t;return e?i("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:w(Ne.g,{variants:Fl,initial:e,animate:e,children:[w(Ll,{"data-rotate":e==="changes"?void 0:"",children:[i(Rl,{variants:Bl,initial:e,animate:e}),i(Tl,{variants:zl,initial:e,animate:e})]}),i(jl,{variants:Wl,initial:e,animate:e}),i(Al,{variants:Vl,initial:e,animate:e})]})}):null}const Hl=Pe.forwardRef(function(e,n){const{collapsed:o,status:r,lastUpdated:a,...s}=e,u=xe(a||"",{minimal:!0}),l=xe(a||"",{minimal:!0,agoSuffix:!0}),d=c.useMemo(()=>r==="syncing"?{text:"Saving...",tone:void 0}:r==="changes"?{text:u,tone:"caution"}:r==="saved"?{text:"Saved!",tone:"positive"}:{},[r,u]);return r?i(Le,{placement:"top",portal:!0,disabled:r!=="changes",content:w(oe,{padding:3,space:3,children:[i(j,{size:1,weight:"semibold",children:"Review changes"}),w(j,{size:1,muted:!0,children:["Changes saved ",l]})]}),children:i(K,{mode:"bleed",justify:"flex-start",tone:d==null?void 0:d.tone,...s,"data-testid":"review-changes-button",ref:n,children:w(L,{align:"center",children:[i(k,{marginRight:o?0:3,children:i(j,{children:i(Ul,{status:r})})}),!o&&i(j,{size:1,weight:"medium",children:d==null?void 0:d.text})]})})}):null}),$l=Pe.memo(Hl),Gl=1e3,Yl=3e3,Kl=c.memo(function(){var e;const{changesOpen:n,documentId:o,documentType:r,editState:a,onHistoryClose:s,onHistoryOpen:u,timelineStore:l,value:d}=V(),h=la(o,r),p=d==null?void 0:d._updatedAt,b=(e=a==null?void 0:a.published)==null?void 0:e._updatedAt,g=!!(a!=null&&a.liveEdit),x=!!(a!=null&&a.published),P=!!(a!=null&&a.draft),[C,_]=c.useState(null),y=et(C),S=!y||(y==null?void 0:y.width)<300,[m,f]=c.useState(null),v=H(l,I=>I.onOlderRevision);c.useEffect(()=>{if(m==="syncing"&&!h.isSyncing){const I=setTimeout(()=>f("saved"),Gl);return()=>clearTimeout(I)}if(m==="saved"){const I=setTimeout(()=>f(null),Yl);return()=>clearTimeout(I)}},[m,p,h.isSyncing]),c.useLayoutEffect(()=>{f(null)},[o]),c.useLayoutEffect(()=>{h.isSyncing&&f("syncing")},[h.isSyncing,p]);const O=c.useMemo(()=>i($l,{lastUpdated:p,status:m||(P?"changes":void 0),onClick:n?s:u,disabled:v,selected:n,collapsed:S}),[P,n,s,u,p,v,m,S]),E=c.useMemo(()=>(g||x)&&i(k,{marginRight:1,children:i(Ml,{disabled:v,lastPublished:b,lastUpdated:p,liveEdit:g,collapsed:S})}),[S,b,p,g,x,v]);return w(L,{align:"center","data-ui":"DocumentSparkline",ref:_,children:[E,w(L,{align:"center",flex:1,children:[O,!S&&i(k,{marginLeft:3,children:i(Ol,{})})]})]})}),ql=B(k)(qn||(qn=z([`
  min-width: 10em;
  max-width: 16em;
`])));function Xl(t){const{actionsBoxRef:e}=t,{badges:n,timelineStore:o}=V(),r=H(o,a=>a.onOlderRevision);return c.useMemo(()=>i(k,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:w(L,{align:"center",children:[i(k,{flex:[1,2],children:n&&i(Kl,{})}),i(ql,{flex:1,marginLeft:[1,3],ref:e,children:r?i(wl,{}):i(El,{})})]})}),[e,n,r])}function Jl(t){const{actionsBoxElement:e,activeIndex:n,children:o,id:r,onActionStart:a,onKeyDown:s,rootRef:u,states:l,...d}=t,h=l[n],p=c.useCallback(b=>{const g=l.filter(P=>P.shortcut&&Ft(P.shortcut,b)),x=g[0];if(g.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(x.shortcut,'"')),x&&!x.disabled&&x.onHandle){b.preventDefault(),x.onHandle(),a(l.indexOf(x));return}s&&s(b)},[a,s,l]);return w(Je,{id:r,onKeyDown:p,tabIndex:-1,...d,ref:u,children:[o,h&&h.dialog&&i(Ht,{zOffset:"paneFooter",children:i(qt,{dialog:h.dialog,referenceElement:e})})]})}const rr=Pe.memo(t=>{const{actionsBoxElement:e,children:n,...o}=t,{actions:r,editState:a}=V(),[s,u]=c.useState(-1),l=c.useCallback(h=>{u(h)},[]),d=c.useMemo(()=>a&&{...a,onComplete:()=>{},revision:void 0},[a]);return!d||!r?null:i(Kt,{actionProps:d,actions:r,children:h=>{let{states:p}=h;return i(Jl,{...o,activeIndex:s,actionsBoxElement:e,onActionStart:l,states:p,children:n})}})});rr.displayName="DocumentActionShortcuts";const io=320,so=600,co=320,lo=["fixed","absolute"],Ql=B(ua)(Xn||(Xn=z([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),lu=c.memo(function(e){const{name:n}=Qe();return i(_o,{name:e.pane.source||n,children:i(Zl,{...e})})});function Zl(t){var e;const{pane:n,paneKey:o}=t,{resolveNewDocumentOptions:r}=Qe().document,a=je(),s=eu(n.options,a.params),{documentType:u,isLoaded:l}=da(s.id,s.type),d=c.useMemo(()=>r({type:"global"}),[r]),[h,p]=pa({templateItems:d}),b=l&&!p,g=c.useMemo(()=>b&&u&&s.type!==u?tu(t,s,u):t,[t,u,b,s]),{ReferenceChildLink:x,handleEditReference:P,groupIndex:C,routerPanesState:_}=a,y=((e=_[C+1])==null?void 0:e[0].params)||{},S=_.length,{parentRefPath:m}=y,f=c.useMemo(()=>m?{path:De(m),state:C>=S-1?"none":C>=S-2?"selected":"pressed"}:{path:[],state:"none"},[m,C,S]);return s.type==="*"&&!b?i(ke,{flex:2.5,minWidth:320,paneKey:o,title:"Loading document…"}):u?i(qo,{...g,children:i(ha,{EditReferenceLinkComponent:x,onEditReference:P,initialValueTemplateItems:h,activePath:f,children:i(nu,{})})},"".concat(u,"-").concat(s.id)):i(Ko,{flex:2.5,minWidth:320,paneKey:o,title:i(W,{children:"The document was not found"}),children:i(oe,{space:4,children:w(j,{as:"p",children:["The document type is not defined, and a document with the ",i("code",{children:s.id})," ","identifier could not be found."]})})})}function eu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=mo();return c.useMemo(()=>{if(t.type&&t.type!=="*")return t;const o=t.template||e.template,r=o?n.find(s=>s.id===o):void 0,a=r==null?void 0:r.schemaType;return a?{...t,type:a}:t},[t,e.template,n])}function tu(t,e,n){return{...t,pane:{...t.pane,options:{...e,type:n}}}}function nu(){const{changesOpen:t,documentType:e,onFocus:n,onPathOpen:o,onHistoryOpen:r,onKeyUp:a,inspectOpen:s,paneKey:u,schemaType:l,value:d}=V(),{features:h}=he(),{collapsed:p}=xo(),b=fa(),[g,x]=c.useState(null),[P,C]=c.useState(null),[_,y]=c.useState(null),[S,m]=c.useState(null),f=et(P),v=f==null?void 0:f.height,O=c.useMemo(()=>i(ml,{footerHeight:v||null,isInspectOpen:s,rootElement:g,setDocumentPanelPortalElement:m}),[v,g,s]),E=c.useMemo(()=>i(tt,{__unstable_elements:{[Po]:S},children:i(mn,{position:lo,zOffset:b.portal,children:i(ma,{ref:C,children:i(Xl,{actionsBoxRef:y})})})}),[S,b.portal]),I=c.useMemo(()=>!h.reviewChanges||!t?null:i(Wt,{element:g,children:i(Wc,{})}),[t,h.reviewChanges,g]),D=c.useCallback(A=>{o(A),n(A)},[o,n]),T=c.useMemo(()=>l?w(W,{children:[i(mn,{position:lo,zOffset:b.portal,children:i(L,{direction:"column",flex:1,height:p?void 0:"fill",children:w(Ql,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:r,onSetFocus:D,children:[O,I]})})}),E,i(fc,{})]}):i(Ko,{flex:2.5,minWidth:320,paneKey:u,title:w(W,{children:["Unknown document type: ",i("code",{children:e})]}),tone:"caution",children:w(oe,{space:4,children:[e&&w(j,{as:"p",children:["This document has the schema type ",i("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&i(j,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),ga]})}),[l,b.portal,p,t,r,D,O,I,E,u,e,d]),F=t?so+co:so,R=t?io+co:io;return i(rr,{actionsBoxElement:_,currentMinWidth:F,"data-testid":"document-pane",flex:2.5,id:u,minWidth:R,onKeyUp:a,rootRef:x,children:T})}function ou(){return i(le,{height:"fill",children:i(L,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:i(Ae,{width:0,children:i(le,{padding:4,radius:2,shadow:1,tone:"caution",children:w(L,{children:[i(k,{children:i(j,{size:1,children:i(Bt,{})})}),w(oe,{flex:1,marginLeft:3,space:3,children:[i(j,{as:"h1",size:1,weight:"bold",children:"No document types"}),i(j,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),i(j,{as:"p",muted:!0,size:1,children:i("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const ru=B(Vs)(Jn||(Jn=z([`
  min-height: 100%;
  min-width: 320px;
`]))),au=Ft("mod+s"),iu=c.memo(function(e){let{onPaneChange:n}=e;var o;const{push:r}=Re(),a=fo(),{layoutCollapsed:s,setLayoutCollapsed:u}=he(),{paneDataItems:l,resolvedPanes:d}=Qs(),h=Nt(c.useCallback(C=>typeof C.intent=="string",[])),[p,b]=c.useState(null),g=c.useCallback(()=>u(!0),[u]),x=c.useCallback(()=>u(!1),[u]);return c.useEffect(()=>{d.length&&n(d)},[n,d]),c.useEffect(()=>{const C=_=>{au(_)&&(_.preventDefault(),r({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[r]),((o=a._original)==null?void 0:o.types.some(va))?w(tt,{element:p||null,children:[w(ru,{flex:1,height:s?void 0:"fill",minWidth:512,onCollapse:g,onExpand:x,children:[l.map(C=>{let{active:_,childItemId:y,groupIndex:S,itemId:m,key:f,pane:v,index:O,params:E,path:I,payload:D,siblingIndex:T,selected:F}=C;return i(c.Fragment,{children:v===Ct?i(ke,{paneKey:f,path:I,selected:F}):i(uc,{active:_,groupIndex:S,index:O,pane:v,childItemId:y,itemId:m,paneKey:f,params:E,payload:D,path:I,selected:F,siblingIndex:T})},"".concat(v===Ct?"loading":v.type,"-").concat(O))}),l.length<=1&&h&&i(ke,{paneKey:"intent-resolver"})]}),i("div",{"data-portal":"",ref:b})]}):i(ou,{})});function su(t){let{tool:{options:e}}=t;const{unstable_sources:n}=Va(),[o]=n,{source:r,defaultDocumentNode:a,structure:s}=e||{};c.useEffect(()=>(gt([]),()=>gt([])),[]);const[{error:u},l]=c.useState({error:null});return u?i(rc,{error:u}):i(Ua,{onCatch:l,children:i(_o,{name:r||o.name,children:w(Ha,{defaultDocumentNode:a,structure:s,children:[i(iu,{onPaneChange:gt}),i(tc,{})]})})})}var uu=Object.freeze({__proto__:null,default:su});export{$o as Delay,lu as DocumentPane,qo as DocumentPaneProvider,uu as index,he as useDeskTool,Uc as useDeskToolSetting};
